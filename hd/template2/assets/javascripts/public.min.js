"use strict";!function(t){function e(t,e){var a={tgsb:"pc",hd_name:"gdbs",data:[],alertAsync:!1};for(var l in e)a[l]=e[l];this.tgsb=a.tgsb,this.city_name="",this.hd_name="",this.data=a.data,this.alertAsync=a.alertAsync,this.init()}var a=this;e.prototype={init:function(){this.city_name=null!=this.getQueryString("city")?this.getQueryString("city"):"bj",this.hd_name=this.getQueryString1(),this.data=this.dataJson(this.city_name,this.hd_name)},getQueryString:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);try{return decodeURI(a[2])}catch(t){try{return $URL.decode(a[2])}catch(t){return null}}},getQueryString1:function(){var t=window.location.pathname.split("/");return"hd"==t[1]?"gdbs":t[1]},dataJson:function(t,e){var a=this;$("body").css("overflow-y","hidden"),$.ajax({type:"POST",url:"http://webapi.zeju.com/hd_templates/index",data:{city_name:t,hd_name:e},dataType:"json",async:!1,success:function(t){if("succeed"==t.message)$("body").css("overflow-y","auto").show(),$("#title").html(t.data.hd_config.head_title),a.quoteLiuzi(a.tgsb,a.city_name,t.data.hd_config,e),"pc"==a.tgsb?a.pcJsonData(t,a.zjfromFn()):"m"==a.tgsb&&a.mJsonData(t,a.zjfromFn());else{if("fail"==t.message){var l=3;return setInterval(function(){var t='<img src="/hd/assets/images/404.png"/><span><b>'+l+"</b>秒后跳转到首页...</span>";$("body").html(t).addClass("body404").show(),0==--l&&("pc"==a.tgsb?window.location.href="http://"+a.city_name+".zeju.com/index":"m"==a.tgsb&&(window.location.href="http://m.zeju.com/"+a.city_name+"/"),l=3)},1e3),!1}$("body").css("overflow-y","auto").show()}}})},pcJsonData:function(t,e){t=t.data;var a="<ul>",l="<ul>";$.each(t.hot_loupans,function(t,e){t%2==0&&(l+="<li>"),l+='<dl><dt class="border_color"><a href="http://bj.zeju.com/loupan/'+e.item_spell+"/"+e.item_id+'.html" target="_blank" style="background-image:url(http://imgs.zeju.cn'+e.cover_pic+')"></a></dt><dd><h3 class="itme_color">'+e.item_name+"</h3><p>"+e.sales_address+"</p><p><span>推荐理由</span></p><p>"+e.summary+"</p></dd></dl>",t%2==1&&(l+="</li>")}),$.each(t.genaral_loupans,function(t,e){t%3==0&&(a+="<li>"),a+='<dl><dt class="border_color"><a href="http://bj.zeju.com/loupan/'+e.item_spell+"/"+e.item_id+'.html" target="_blank"><img src="http://imgs.zeju.cn'+e.cover_pic+'" alt=""></a></dt><dd><p class="itme_color2">'+e.sales_address+"</p><p>";var l=e.labels.split("、");$.each(l,function(t,e){a+='<span class="label">'+e+"</span>"}),a+="</p></dd></dl>",t%3==2&&(a+="</li>")}),l+="</ul>",$("#loupan_cont_remen").html(l),$("#loupan_cont_tuijian").html(a),$("#banner").attr("src",t.colors.bg_pc_url),$(".bshb_main").css("background",t.colors.list_div_bg_clor),$(".border_color").css("border","1px solid"+t.colors.border_color),$(".itme_color").css("color",t.colors.hot_item_title_color),$(".itme_color2").css("color",t.colors.item_title_color),$(".label").css("border","1px solid"+t.colors.labels_border_bg_color),$("#tab_bar_img").attr("src",t.colors.bg_bottom_url),$("#yuyue").html(t.colors.phone_content),$("#bshb_btn").val(t.hd_config.submit_btn_title).css("background",t.hd_config.submit_btn_color)},mJsonData:function(t,e){var a=t.data.hot_loupans,l=t.data.genaral_loupans,s=t.data.colors,i="",o="";$.each(a,function(t,a){i+='<li>\n                  <a href="http://m.zeju.com/bj/loupan/loupan_detail/'+a.item_id+'">\n                    <div class="box-left fl">\n                      <img class="itme-img" src="http://imgs.zeju.cn'+a.cover_pic+'">\n                    </div>\n                    <div class="box-right">\n                      <ul>\n                        <li class="name">'+a.item_name+'</li>\n                        <li class="address">'+a.sales_address+"</li>\n                        <li>",void 0!=a.ext_phone&&null!=a.ext_phone?i+='<a class="phone" href="tel://4006561188,'+a.ext_phone+e+'">':i+='<a class="phone" href="tel://4006561188,0">',i+='<i class="iconfont">&#xe64c;</i>\n                          </a>\n                        </li>\n                        <li class="tag-reason">推荐理由</li>\n                        <li class="contains">'+a.summary+"</li>\n                      </ul>\n                    </div>\n                  </a>\n                </li>"}),$.each(l,function(t,a){o+='<li><a href="http://m.zeju.com/bj/loupan/loupan_detail/'+a.item_id+'"><div class="box-left fl"><img class="itme-img" src="http://imgs.zeju.cn'+a.cover_pic+'" alt=""></div><div class="box-right"><ul><li class="name">'+a.item_name+"</li><li>"+a.sales_address+"</li>",void 0!=a.ext_phone&&null!=a.ext_phone?o+='<li><a class="phone" href="tel://4006561188,'+a.ext_phone+e+'"><i class="iconfont">&#xe64c;</i></a></li>':o+='<li><a class="phone" href="tel://4006561188,0"><i class="iconfont">&#xe64c;</i></a></li>',o+='<li class="list_last">',$.each(a.labels.split("、"),function(t,e){o+='<label class="tag">'+e+"</label>"}),o+="</li></ul></div></a></li>"}),$("#itmeHot").html(i),$("#itmeTotal").html(o),$("#banner").attr("src",s.bg_m_url),$(".bodyer").css("background",s.list_div_bg_clor),$(".box-left").css("border","1px solid"+s.border_color),$(".name").css("color",s.hot_item_title_color),$("label").css("background",s.labels_bg_color),$("#hd_btn").html(t.data.hd_config.submit_btn_title),$(".mobile").html('<a id="hour" href="tel://'+t.data.hd_config.hotline+'">24h电话咨询</a>')},quoteLiuzi:function(t,e,a,l){$("#seascape_wrap").Liuzi({huodongUrl:a.liuzi_api_url,hd_name:l,cityName:e,yanBtnColor:"codered",yanzmText:"获取",clue_type_id:a.clue_type_id,tgsb:t,layoutType:"pc"==t?"1":a.alert_type,hd_alertArr:{alertId:"#hd_alert",succeedStr:a[t+"_succeed_alert"],repeatStr:a[t+"_repeat_alert"]}})},zjfromFn:function(){var t=this.getQueryString("zjfrom");return null!=t&&""!=t?t<10&&(t="0"+t):t="m"==this.tgsb?"00":"16",t}},$.fn.extend({Public:function(t){return new e(a,t)}})}(window);