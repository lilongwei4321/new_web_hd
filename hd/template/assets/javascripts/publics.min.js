"use strict";!function(t){function s(t,s){var a={tgsb:"pc"};for(var e in s)a[e]=s[e];this.tgsb=a.tgsb,this.city_name="",this.hd_name="",this.init()}var a=this;s.prototype={init:function(){this.city_name=null!=this.getQueryString("city")?this.getQueryString("city"):"hz",this.hd_name=this.fieldUrl(),this.renderPage(this.city_name,this.hd_name)},getQueryString:function(t){var s=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(s);try{return decodeURI(a[2])}catch(t){try{return $URL.decode(a[2])}catch(t){return null}}},fieldUrl:function(){var t=window.location.pathname.split("/");return"hd"==t[1]?"17gwxs":t[1]},back_imgUrl:function(t,s,a,e){$("#banner").attr("src",t["bg_"+e+"_url"]),setTimeout(function(){$("#html").css("opacity","1")},100),$("#online").css({background:t.im_bg_color}),$("#loupanList").css("background",t.list_div_bg_color),$(".list").css("background",t.list_li_bg_color),$("#wrap").css("background",t.bg_color),$("#hd_btn").html(s.submit_btn_title),$("#title").html(s.head_title),$(".loupan_item").css("background",t.item_bg_color),$(".zixun_back").css("background",t.im_bg_color),$("#gengduo,#hd_btn").css("background",t.submit_btn_color),s.has_im&&$("#zixun_back").show(),s.has_more_info&&("pc"==e?($("#More").css({height:"105px",paddingTop:0}),$("#gengduo").show().attr("href","http://"+a.city_name_abbr+".zeju.com/loupan")):($("#gengduo_back").addClass("flex"),$("#gengduo").attr("href","http://m.zeju.com/"+a.city_name_abbr+"/loupan/list/index")))},liuzi:function(t,s,a,e){$(".wrap").Liuzi({huodongUrl:a.liuzi_api_url,yanBtnColor:"yanzm_btncolor",clue_type_id:a.clue_type_id,tgsb:t,yanzmText:"获取",cityName:s,hd_name:e,layoutType:a.alert_type,hd_alertArr:{succeedStr:a[t+"_succeed_alert"],repeatStr:a[t+"_repeat_alert"]}})},renderPage:function(t,s){var a=this;$.ajax({type:"POST",url:"http://webapi.zeju.com/hd_templates/index",data:{city_name:t,hd_name:s},success:function(e){if("fail"==e.message)a.failData(t,a.tgsb);else if("succeed"==e.message){var n=e.data;"pc"==a.tgsb?a.succeed_pc_page(n,a.zjfromFn(),a.getQueryString("city")):a.succeed_m_page(n,a.zjfromFn(),a.getQueryString("city")),a.back_imgUrl(n.colors,n.hd_config,n.city,a.tgsb),a.liuzi(a.tgsb,a.city_name,n.hd_config,s),a.imPage(a.tgsb,a.city_name),$("#hd_phone").on("keyup",function(){11==$(this).val().length&&/^1[34578]\d{9}$/.test($(this).val())?$("#hd_yanzmBtn").addClass("yanzm_btncolor").css("background",n.colors.submit_btn_color).attr("disabled",!1):$("#hd_yanzmBtn").removeClass("yanzm_btncolor").css("background","#c6c6c6").attr("disabled",!0)})}}})},failData:function(t,s){var a=3;setInterval(function(){var e='<img src="/hd/assets/images/404.png"/><span><b>'+a+"</b>秒后跳转到首页...</span>";$("#body").html(e).addClass("body404"),0==--a&&(window.location.href="pc"==s?"http://"+t+".zeju.com/index":"http://m.zeju.com/"+t),$("#html").css("opacity","1")},1e3)},succeed_pc_page:function(t,s,a){var e="";$.each(t.loupans,function(a,n){a%2==0&&(e+="<li>"),e+='<dl class="list">\n              <dt>\n                <h4 class="loupan_item">'+n.item_name+'</h4>\n                <a href="http://'+t.city.city_name_abbr+".zeju.com/loupan/"+n.item_spell+"/"+n.item_id+'.html"  target="_blank" style="background-image:url(http://imgs.zeju.cn'+n.cover_pic+')">\n                </a>\n              </dt>\n              <dd class="dd">',null==n.price_type||0==n.average_price?e+='<p class="price"><span>价格 - 暂无</span>':4==n.price_type?e+='<p class="price"><span>总价：<b>'+n.average_price+"</b>元／套</span>":e+='<p class="price"><span>均价：<b>'+n.average_price+"</b>元／m²</span>";var c=n.update_date.substr(0,10).split("-");e+="<time>("+c[0]+"."+c[1]+"."+c[2]+")</time>",e+='</p>\n                        <p class="Telephone"><span>售楼电话：</span>',void 0!=n.ext_phone&&null!=n.ext_phone?e+="<span>400-656-1188 转 "+n.ext_phone+s+"</span></p>":e+="<span>400-656-1188 转 0</span></p>",e+='<p class="address"><span>售楼地址：</span><span>'+n.sales_address+"</span></p>\n                    </dd>","在售"==n.salse_status?e+='<dd class="state" style="background:'+t.colors.sale_statuses[1]+'">【在售】</dd>':"待售"==n.salse_status?e+='<dd class="state" style="background:'+t.colors.sale_statuses[0]+'">【待售】</dd>':"售罄"==n.salse_status?e+='<dd class="state" style="background:'+t.colors.sale_statuses[2]+'">【售罄】</dd>':"热销"==n.salse_status&&(e+='<dd class="state" style="background:'+t.colors.sale_statuses[1]+'">【热销】</dd>'),e+="</dl>",t.length%2!=0&&t.length-a==1&&(e+='<div class="list"></div>'),a%2==1&&(e+="</li>")}),$("#loupan_cont").html(e)},succeed_m_page:function(t,s,a){var e="";$.each(t.loupans,function(a,n){e+='<dl class="list">\n            <dt>\n              <a href="http://m.zeju.com/'+t.city.city_name_abbr+"/loupan/loupan_detail/"+n.item_id+'" style="background-image:url(http://imgs.zeju.cn'+n.cover_pic+')"></a>',"在售"==n.salse_status?e+='<span class="state" style="background:'+t.colors.sale_statuses[1]+'">【在售】</span>':"待售"==n.salse_status?e+='<span class="state" style="background:'+t.colors.sale_statuses[0]+'">【待售】</span>':"售罄"==n.salse_status?e+='<span class="state" style="background:'+t.colors.sale_statuses[2]+'">【售罄】</span>':"热销"==n.salse_status&&(e+='<span class="state" style="background:'+t.colors.sale_statuses[1]+'">【热销】</span>'),null==n.price_type||0==n.average_price||null==n.average_price?e+='<p class="price"><span>价格 - 暂无</span>':4==n.price_type?e+="<p><span>总价 <b>"+n.average_price+"</b> 元／套</span>":e+="<p><span>均价 <b>"+n.average_price+"</b> 元／m²</span>";var c=n.update_date.substr(0,10).split("-");e+="<time>("+c[0]+"."+c[1]+"."+c[2]+")</time>",e+='</p>\n                </dt>\n                <dd class="text">\n                  <p class="title">'+n.item_name+'</p>\n                  <p class="address">售楼地址：'+n.sales_address+"</p>",e+='<p class="phone" style="background:'+t.colors.rexian_color+'">\n                        <a href="tel:4006561188,'+n.ext_phone+s+'">楼盘热线</a>\n                      </p>',e+="</dd>\n            </dl>"}),$("#loupan_cont").html(e)},imPage:function(t,s){"pc"==t?($("#zixun").on("click",function(){var t=$('<iframe class="iframe" id="iframe" src="/hd/im.html?city='+s+'"></iframe>');$("#wrap").after(t),$("#iframe").show(),$("#guan_iframe").show()}),$("#guan_iframe").on("click",function(){$("#iframe").hide(),$("#guan_iframe").hide()})):$("#online").attr("href","http://m.zeju.com/m/index.html?city_name="+s).show()},zjfromFn:function(){var t=this.getQueryString("zjfrom");return null!=t&&""!=t?t<10&&(t="0"+t):t="m"==this.tgsb?"00":"16",t}},$.fn.extend({Public:function(t){return new s(a,t)}})}(window);